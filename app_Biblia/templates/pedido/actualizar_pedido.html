{% extends 'base.html' %}
{% block content %}
<h3>Actualizar Pedido #{{ pedido.id }}</h3>
<form method="POST" action="{% url 'realizar_actualizacion_pedido' pedido.id %}">
  {% csrf_token %}
  
  <div class="mb-3">
    <label>Cliente</label>
    <select class="form-control" name="cliente" required>
      {% for c in clientes %}
        <option value="{{ c.id }}" {% if c.id == pedido.cliente.id %}selected{% endif %}>
          {{ c.nombre }} {{ c.apellido }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label>Dirección de Envío</label>
    <input class="form-control" name="direccion_envio" value="{{ pedido.direccion_envio }}" required>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <label>Método de Pago</label>
      <input class="form-control" name="metodo_pago" value="{{ pedido.metodo_pago }}" required>
    </div>
    <div class="col-md-6 mb-3">
      <label>Estado del Pedido</label>
      <input class="form-control" name="estado_pedido" value="{{ pedido.estado_pedido }}" required>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4 mb-3">
      <label>Total Neto</label>
      <input class="form-control" name="total_neto" type="number" step="0.01" value="{{ pedido.total_neto|stringformat:"f" }}" required>
    </div>
    <div class="col-md-4 mb-3">
      <label>Impuesto Total</label>
      <input class="form-control" name="impuesto_total" type="number" step="0.01" value="{{ pedido.impuesto_total|stringformat:"f" }}" required>
    </div>
    <div class="col-md-4 mb-3">
      <label>Costo de Envío</label>
      <input class="form-control" name="costo_envio" type="number" step="0.01" value="{{ pedido.costo_envio|stringformat:"f" }}" required>
    </div>
  </div>
  
  <button class="btn btn-success" type="submit">Guardar Cambios</button>
  <a class="btn btn-secondary" href="{% url 'ver_pedidos' %}">Cancelar</a>
</form>
{% endblock %}